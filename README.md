# protoutils

Utility functions for working with protobuf.

protojson: convert json to protobuf and vice verca
protoeterm: convert arbitraty erlang terms to protobuf and vica versa

# protojson

Convert json to protobuf format and vice versa.

## Convenience functions

Calling `protojson:rawjsontoproto(JSON)` converts a json binary string
to a protobuf binary string.

Calling `protojson:rawprototojson(Proto)` reverses the operation.

## Other functions

`protojson:jsontoproto(MochiJson)` expects an erlang term as defined
by the mochijson2 json module. It will output structs that can
subsequently encoded using the `json_pb:encode()`
function. `protojson:prototojson(Proto)` expects a jsonvalue record
that is usually obtained by a call to `json_pb:decode_jsonvalue()` and
returns a mochijson2 compatible erlang term describing the json
object.

# protoeterm

`protoeterm:term_to_protobin(Term) :: binary()` and
`protoeterm:protobin_to_term(Bin) :: erlang_term()`

Convert arbitrary erlang terms to protobuf and vice versa.

Works with all erlang terms, with the exception of improper
lists. There are some data types that can only be serialised and
deserialised with the help of term_to_binary and binary_to_term. These
are:

* PIDs
* FUNs
* ports
* references (generated by make_ref())

Improper lists are not supported by this module, with the exception of
a list that has got exactly two elements, like this: [A|B]. This
special case is supported because erlang's dict module uses this
representation to store key,value pairs.

Note that term_to_binary encodes terms more space efficiently than
this module.
